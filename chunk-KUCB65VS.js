import{a as V,b as N,c as A,g as D}from"./chunk-RNB7OSLP.js";import{$a as a,Ca as b,Db as G,Ga as d,Ma as m,Na as i,Oa as t,Pa as y,S as g,T as f,Ta as M,Va as C,Xa as l,Ya as I,ab as x,bb as u,cb as S,db as P,eb as O,fb as E,hb as h,ib as _,jb as w,pa as k,qa as o,wb as T,xb as $,ya as v,yb as z,zb as F}from"./chunk-2QDFWEOJ.js";function W(n,c){if(n&1&&(i(0,"div",13),y(1,"img",14),i(2,"div",15)(3,"div",16),a(4),t(),i(5,"div",17),a(6),t(),i(7,"div",18),a(8),t(),i(9,"div",19),a(10),t()()()),n&2){let e=c.$implicit;o(),m("alt",E(e.gift.name))("src",e.gift.image,k),o(3),x(e.gift.name),o(2),x(e.gift.description),o(2),u("$",e.gift.price),o(2),u("x",e.count)}}function j(n,c){if(n&1&&(i(0,"span",20),a(1),t()),n&2){let e=l(2);o(),u("Coupon '",e.appliedCoupon,"' applied!")}}function U(n,c){if(n&1&&(i(0,"div"),a(1),t()),n&2){let e=l(2);o(),u("Discount: -$",e.discount)}}function L(n,c){if(n&1){let e=M();i(0,"div")(1,"div",3),d(2,W,11,7,"div",4),h(3,"async"),t(),i(4,"div",5)(5,"input",6),O("ngModelChange",function(r){g(e);let s=l();return P(s.couponCode,r)||(s.couponCode=r),f(r)}),t(),i(6,"button",7),C("click",function(){g(e);let r=l();return f(r.applyCoupon())}),a(7,"Apply Coupon"),t(),d(8,j,2,1,"span",8),t(),i(9,"div",9)(10,"div"),a(11),t(),d(12,U,2,1,"div",10),i(13,"div",11),a(14),h(15,"async"),t()(),i(16,"button",12),C("click",function(){g(e);let r=l();return f(r.proceedToCheckout())}),a(17,"Proceed to Checkout"),t()()}if(n&2){let e=l();o(2),m("ngForOf",_(3,6,e.checkoutItems$)),o(3),S("ngModel",e.couponCode),o(3),m("ngIf",e.appliedCoupon),o(3),u("Subtotal: $",e.getSubtotal()),o(),m("ngIf",e.discount>0),o(2),u("Total: $",e.getTotal(_(15,8,e.checkoutItems$)))}}function R(n,c){n&1&&(i(0,"div",21),a(1,"Your checkout is empty."),t())}var B=class n{constructor(c){this.giftService=c;this.checkoutItems$=this.giftService.checkout$}checkoutItems$;couponCode="";discount=0;appliedCoupon="";getTotal(c){return c?c.reduce((p,r)=>p+r.gift.price*r.count,0)-this.discount:0}applyCoupon(){this.couponCode.trim().toUpperCase()==="GIFT10"?(this.discount=this.getSubtotal()*.1,this.appliedCoupon="GIFT10"):(this.discount=0,this.appliedCoupon="",alert("Invalid coupon code"))}getSubtotal(){let c=0,e=[];return this.checkoutItems$.subscribe(p=>{Array.isArray(p)&&(e=p)}).unsubscribe(),e.forEach(p=>{c+=p.gift.price*p.count}),c}proceedToCheckout(){alert("Proceeding to payment...")}static \u0275fac=function(e){return new(e||n)(v(G))};static \u0275cmp=b({type:n,selectors:[["app-checkout"]],decls:7,vars:4,consts:[["emptyCheckout",""],[1,"checkout-page"],[4,"ngIf","ngIfElse"],[1,"checkout-list"],["class","checkout-item",4,"ngFor","ngForOf"],[1,"coupon-section"],["type","text","placeholder","Enter coupon code",3,"ngModelChange","ngModel"],[3,"click"],["class","applied-coupon",4,"ngIf"],[1,"checkout-summary"],[4,"ngIf"],[1,"total"],[1,"proceed-btn",3,"click"],[1,"checkout-item"],[1,"checkout-img",3,"src","alt"],[1,"checkout-details"],[1,"checkout-name"],[1,"checkout-desc"],[1,"checkout-price"],[1,"checkout-count"],[1,"applied-coupon"],[1,"empty-message"]],template:function(e,p){if(e&1&&(i(0,"div",1)(1,"h2"),a(2,"Checkout"),t(),d(3,L,18,10,"div",2),h(4,"async"),d(5,R,2,0,"ng-template",null,0,w),t()),e&2){let r,s=I(6);o(3),m("ngIf",(r=_(4,2,p.checkoutItems$))==null?null:r.length)("ngIfElse",s)}},dependencies:[F,T,$,D,V,N,A,z],styles:[".checkout-page[_ngcontent-%COMP%]{background:linear-gradient(90deg,#e0d5d5e6,#6b555599,#c34b4b33);min-height:100vh;padding:2rem}.checkout-list[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:1.5rem}.checkout-item[_ngcontent-%COMP%]{display:flex;align-items:center;background:#fff;border-radius:8px;box-shadow:0 2px 8px #00000014;padding:1rem}.checkout-img[_ngcontent-%COMP%]{width:80px;height:80px;object-fit:cover;border-radius:8px;margin-right:1rem}.checkout-details[_ngcontent-%COMP%]{flex:1}.checkout-name[_ngcontent-%COMP%]{font-weight:700;font-size:1.1rem}.checkout-desc[_ngcontent-%COMP%]{color:#666;font-size:.95rem}.checkout-price[_ngcontent-%COMP%]{color:#c34b4b;font-weight:700;margin-top:.5rem}.checkout-count[_ngcontent-%COMP%]{font-size:1.1rem;font-weight:700;margin-top:.5rem}.coupon-section[_ngcontent-%COMP%]{margin-top:2rem;display:flex;align-items:center;gap:1rem}.coupon-section[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{padding:.5rem;border-radius:4px;border:1px solid #ccc}.coupon-section[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{background:#c34b4b;color:#fff;border:none;border-radius:4px;padding:.5rem 1rem;cursor:pointer}.applied-coupon[_ngcontent-%COMP%]{color:#388e3c;font-weight:700}.checkout-summary[_ngcontent-%COMP%]{margin-top:2rem;font-size:1.1rem}.total[_ngcontent-%COMP%]{font-size:1.3rem;font-weight:700;color:#c34b4b}.proceed-btn[_ngcontent-%COMP%]{margin-top:2rem;background:#388e3c;color:#fff;border:none;border-radius:4px;padding:.75rem 2rem;font-size:1.1rem;cursor:pointer}.empty-message[_ngcontent-%COMP%]{text-align:center;color:#888;font-size:1.2rem;margin-top:2rem}"]})};export{B as Checkout};
