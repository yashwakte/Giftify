import{a as F,b as N,c as A,g as B}from"./chunk-RWIBMJ4L.js";import{i as T,j as V,k as $,l as z,q as D}from"./chunk-7GTSH2PX.js";import{Da as v,Ia as y,Na as d,T as m,U as g,Va as s,Wa as n,Xa as t,Ya as w,cb as C,eb as f,gb as u,kb as M,mb as a,nb as k,ob as l,pb as I,qb as S,rb as P,sa as b,sb as O,ua as c,ub as _,vb as x,wb as E}from"./chunk-ASTL6CWT.js";function W(i,r){if(i&1){let e=C();n(0,"div",13),w(1,"img",14),n(2,"div",15)(3,"div",16),a(4),t(),n(5,"div",17),a(6),t(),n(7,"div",18),a(8),t(),n(9,"div",19),a(10),t()(),n(11,"button",20),f("click",function(){m(e);let o=u(2);return g(o.proceedToCheckout())}),a(12,"Buy Now"),t()()}if(i&2){let e=r.$implicit;c(),s("alt",O(e.gift.name))("src",e.gift.image||"https://via.placeholder.com/80x80?text=Gift",b),c(3),k(e.gift.name),c(2),k(e.gift.description),c(2),l("$",e.gift.price),c(2),l("x",e.count)}}function j(i,r){if(i&1&&(n(0,"span",21),a(1),t()),i&2){let e=u(2);c(),l("Coupon '",e.appliedCoupon,"' applied!")}}function U(i,r){if(i&1&&(n(0,"div"),a(1),t()),i&2){let e=u(2);c(),l("Discount: -$",e.discount)}}function L(i,r){if(i&1){let e=C();n(0,"div")(1,"div",3),d(2,W,13,7,"div",4),_(3,"async"),t(),n(4,"div",5)(5,"input",6),P("ngModelChange",function(o){m(e);let h=u();return S(h.couponCode,o)||(h.couponCode=o),g(o)}),t(),n(6,"button",7),f("click",function(){m(e);let o=u();return g(o.applyCoupon())}),a(7,"Apply Coupon"),t(),d(8,j,2,1,"span",8),t(),n(9,"div",9)(10,"div"),a(11),t(),d(12,U,2,1,"div",10),n(13,"div",11),a(14),_(15,"async"),t()(),n(16,"button",12),f("click",function(){m(e);let o=u();return g(o.proceedToCheckout())}),a(17,"Proceed to Checkout"),t()()}if(i&2){let e=u();c(2),s("ngForOf",x(3,6,e.checkoutItems$)),c(3),I("ngModel",e.couponCode),c(3),s("ngIf",e.appliedCoupon),c(3),l("Subtotal: $",e.getSubtotal()),c(),s("ngIf",e.discount>0),c(2),l("Total: $",e.getTotal(x(15,8,e.checkoutItems$)))}}function R(i,r){i&1&&(n(0,"div",22),a(1,"Your checkout is empty."),t())}var G=class i{constructor(r){this.checkoutService=r;this.checkoutItems$=this.checkoutService.checkout$}checkoutItems$;couponCode="";discount=0;appliedCoupon="";getTotal(r){return r?r.reduce((p,o)=>p+o.gift.price*o.count,0)-this.discount:0}applyCoupon(){this.couponCode.trim().toUpperCase()==="GIFT10"?(this.discount=this.getSubtotal()*.1,this.appliedCoupon="GIFT10"):(this.discount=0,this.appliedCoupon="",alert("Invalid coupon code"))}getSubtotal(){let r=0,e=[];return this.checkoutItems$.subscribe(p=>{Array.isArray(p)&&(e=p)}).unsubscribe(),e.forEach(p=>{r+=p.gift.price*p.count}),r}proceedToCheckout(){alert("Proceeding to payment...")}static \u0275fac=function(e){return new(e||i)(v(D))};static \u0275cmp=y({type:i,selectors:[["app-checkout"]],decls:7,vars:4,consts:[["emptyCheckout",""],[1,"checkout-page"],[4,"ngIf","ngIfElse"],[1,"checkout-list"],["class","checkout-item",4,"ngFor","ngForOf"],[1,"coupon-section"],["type","text","placeholder","Enter coupon code",3,"ngModelChange","ngModel"],[3,"click"],["class","applied-coupon",4,"ngIf"],[1,"checkout-summary"],[4,"ngIf"],[1,"total"],[1,"proceed-btn",3,"click"],[1,"checkout-item"],[1,"checkout-img",3,"src","alt"],[1,"checkout-details"],[1,"checkout-name"],[1,"checkout-desc"],[1,"checkout-price"],[1,"checkout-count"],[1,"buy-now-btn",3,"click"],[1,"applied-coupon"],[1,"empty-message"]],template:function(e,p){if(e&1&&(n(0,"div",1)(1,"h2"),a(2,"Checkout"),t(),d(3,L,18,10,"div",2),_(4,"async"),d(5,R,2,0,"ng-template",null,0,E),t()),e&2){let o,h=M(6);c(3),s("ngIf",(o=x(4,2,p.checkoutItems$))==null?null:o.length)("ngIfElse",h)}},dependencies:[z,T,V,B,F,N,A,$],styles:[".checkout-page[_ngcontent-%COMP%]{background:#e4ecf1;min-height:100vh;padding:2rem;box-shadow:0 2px 16px #00000012;border-radius:12px;max-width:900px;margin:2rem auto}.buy-now-btn[_ngcontent-%COMP%]{background:linear-gradient(90deg,#538ce7,#81aae7);color:#fff;border:none;border-radius:4px;padding:.5rem 1.2rem;margin-left:1rem;font-weight:600;font-size:1rem;cursor:pointer;box-shadow:0 2px 8px #51aae721;transition:background .2s,box-shadow .2s}.buy-now-btn[_ngcontent-%COMP%]:hover{background:linear-gradient(90deg,#357abd,#538ce7);box-shadow:0 4px 16px #538ce7aa}.checkout-list[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:1.5rem}.checkout-item[_ngcontent-%COMP%]{display:flex;align-items:center;background:#fff;border-radius:8px;box-shadow:0 2px 8px #00000014;padding:1rem}.checkout-img[_ngcontent-%COMP%]{width:80px;height:80px;object-fit:cover;border-radius:8px;margin-right:1rem}.checkout-details[_ngcontent-%COMP%]{flex:1}.checkout-name[_ngcontent-%COMP%]{font-weight:700;font-size:1.1rem}.checkout-desc[_ngcontent-%COMP%]{color:#666;font-size:.95rem}.checkout-price[_ngcontent-%COMP%]{color:#c34b4b;font-weight:700;margin-top:.5rem}.checkout-count[_ngcontent-%COMP%]{font-size:1.1rem;font-weight:700;margin-top:.5rem}.coupon-section[_ngcontent-%COMP%]{margin-top:2rem;display:flex;align-items:center;gap:1rem}.coupon-section[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{padding:.5rem;border-radius:4px;border:1px solid #ccc}.coupon-section[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{background:#c34b4b;color:#fff;border:none;border-radius:4px;padding:.5rem 1rem;cursor:pointer}.applied-coupon[_ngcontent-%COMP%]{color:#388e3c;font-weight:700}.checkout-summary[_ngcontent-%COMP%]{margin-top:2rem;font-size:1.1rem}.total[_ngcontent-%COMP%]{font-size:1.3rem;font-weight:700;color:#c34b4b}.proceed-btn[_ngcontent-%COMP%]{margin-top:2rem;background:#388e3c;color:#fff;border:none;border-radius:4px;padding:.75rem 2rem;font-size:1.1rem;cursor:pointer}.empty-message[_ngcontent-%COMP%]{text-align:center;color:#888;font-size:1.2rem;margin-top:2rem}"]})};export{G as Checkout};
